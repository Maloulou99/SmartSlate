<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/frontsite.css}" />
    <title>Tasks for Project "${projectId}"</title>
</head>
<body>
<h1>Tasks for Project <span th:text="${projectId}"></span></h1>

<p>The following tasks have been created:</p>
<table>
    <tr>
        <th>Task ID</th>
        <th>Task Name</th>
        <th>Description</th>
        <th>Deadline</th>
        <th>Project Manager</th>
        <th>Project created by</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    <tr th:each="task : ${tasks}">
        <td th:text="${task.taskId}"></td>
        <td th:text="${task.taskName}"></td>
        <td th:text="${task.description}"></td>
        <td th:text="${task.deadline}"></td>
        <td>
            <span th:if="${task.projectmanagerID}">
                <span th:text="${projectManagerFirstName}"></span>
                <span> </span>
                <span th:text="${projectManagerLastName}"></span>
            </span>
            <span th:unless="${task.projectmanagerID}">
                No project manager assigned.
            </span>
        </td>
        <td>
            <span th:text="${projectCreatorFirstName}"></span>
            <span> </span>
            <span th:text="${projectCreatorLastName}"></span>
        </td>
        <td th:text="${task.status}"></td>
        <td>
            <div class="task-buttons">
                <a th:href="@{/projects/{projectId}/tasks/{taskId}/delete(projectId=${projectId}, taskId=${task.taskId})}" class="button">Delete Task</a>
                <a th:href="@{/tasks/{taskId}/update}" class="button">Update Task</a>
                <a th:href="@{/tasks/{taskId}/createSubtask}" class="button">Create Subtask</a>
            </div>
        </td>
    </tr>
</table>

<input type="hidden" name="projectId" th:value="${projectId}" />
<a th:href="@{'/projects/' + ${projectId} + '/createTask'}">Create another task for this project</a>
<br><br>
<a th:href="@{/projects/tasks/{projectId}/{userId}(projectId=${projectId},userId=${userId})}" >Back to Your Frontpage</a>

</body>
</html>
